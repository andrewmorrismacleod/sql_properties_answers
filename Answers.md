MVP Questions

In our Property Tracker application:

Q1. Where are we instantiating instances of the Property class?
    In lines 6, 15 and 24 of the console.rb file.


Q2. Where are we defining the SQL that enables us to save the ruby Property object into the database?
    in lines 18 to 29 of the save method of the Property class

Q3. In console.rb, which lines modify the database?
  Lines 31 and 33

Q4. Why do we not define the id of a Property object at the point we instantiate it (‘new it up’)?
    Because we want the database to be the source of the id so we wait until the database knows about the object
    and assigns it a unique id.

Q5. Where and how do we assign the id (that is generated by the database) to the ruby Property object?
    This happens on line 32 of the Property Class (within the save method).
    When save is called, the database will be connected and as part of executing the statement, an id will be assigned.


Q6. Why do we put a guard (an if clause) on the @id attribute in the constructor?
    Sometimes the object can be instantiated before it has actually been created in the database.
    When this happens we need to make sure that we aren't giving the object an id that hasn't been sourced from the database.

Q7. Why are some of the CRUD actions represented by instance methods, and others by class methods?
    Some of the actions are applicable to a single instance of the Property class.
    When this is the case we can simply update that particular instance.
    Other actions are applicable across the board i.e. not to just one instance of the class.
    When this is the case we need to use a generalised method applicable to all i.e. a class method.


Q8. What type of data structure is returned by calls to db.exec_prepared()? In the save method, how do we access the id from the returned data structure?
    An array is returned by a call to db.exec_prepared.
    Each element of the array is a hash whose keys are the equivalent to the instance variables of the class/columns of the database.
    We obtain the id by accessing the first hash in the returned array (the [0] part) and then access the id using the key string 'id' (the ['id] part'])


Q9. Why do we use prepared statements when performing database operations?
    To speed up the execution of the statement
    To prevent malicious modifications to the database via an injection attack

Extension Questions

Look at the find_by_id and find_by_address methods in the Property class.

Q10. What do they take in as their arguments?
    find_by_id takes in an id number as an argument
    find_by_address takes in an address string as an argument

Q11. What are their return values?
    They return an instance of the Property class
